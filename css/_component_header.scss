@import 'mixins';

$g1: #424242;
$g2: lighten($g1, 10%);
$g3: lighten($g1, 20%);

.page-1-header {
  @include hw($h-header, 100%);
  @include flex(center, row, stretch);
  background-color: $g1;
  box-shadow: $level1;
  z-index: 1;

  // The header is divided into 3 container divs

  > div {
    background-color: $g2;
    height: 100%;

    // first is for the left bookmark block + main nav

    &:nth-of-type(1) {
      width: 40%;

      @include desktop-small {
        width: 37.5%;
      }
    }

    // second is for the middle lion logo + dbt text

    &:nth-of-type(2) {
      @include flex(center, column, center);
      width: 20%;

      // lion logo
      img {
        width: 80%;
      }

      a:link,
      a:active,
      a:visited {
        @include font(0, 1.85em, 700, $light);
        @include trans(color);
        text-align: center;
      }

      a:hover {
        @include font($color:$orange);
      }

      @include desktop-small {
        width: 25%;
      }
    }

    // third is for the right search block + secondary nav

    &:nth-of-type(3) {
      width: 40%;

      @include desktop-small {
        width: 37.5%;
      }
    }
  }

  // this is our bookmark + search container

  aside {
    @include flex(center, row, flex-start);
    background-color: $g3;
    height: 70%;
    padding: 0 2em;

    img {
      height: 2em;
    }

    a:link,
    a:visited,
    a:active {
      @include font($size: 85%, $color:$light);
      margin-left: 1em;
    }
  }

  // here we set the different flex orientations for the nav containers

  div {
    // target left nav container
    &:nth-of-type(1) {
      nav {
        @include flex(center, row, flex-start);
      }
    }

    &:nth-of-type(3) {
      // target right nav container
      nav {
        @include flex(center, row, flex-end);
      }
    }
  }

  // these are our nav elements which contain ul, li, etc

  nav {
    @include hw(30%, 100%);
    background-color: $g3;

    ul {
      @include hw(100%, auto);
      @include flex(flex-end, row, flex-start);
      margin: 0 1em;
      white-space: nowrap;
    }

    li {
      background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0) 50%, $orange 50%); // allows the slide-up animation with a solid gradient
      background-size: 100% 200%;
      position: relative;
      transition: background .2s ease-in-out;

      &:hover {
        background-position: 0 100%;
      }

      // hide "meet the team" at desktop-small screen width

      &:nth-of-type(2) {
        @include desktop-small {
          display: none;
        }
      }

      // hide "about use" at mobile-large screen width

      &:nth-of-type(1) {
        @include mobile-large {
          display: none;
        }
      }
    }

    a:link,
    a:visited,
    a:active {
      @include font(0, .95em, 0, $light);
      @include trans(background-color);
      display: block; // need this so css pays attention to padding and margin while arranging the layout
      padding: .85em 1em;
      text-transform: uppercase;
    }
  }

  // inside each nav > ul > li we can embed a div class .hover-menu which is revealed on mousover on the li
  // instead of setting display:none we set visibility:hidden and opacity:0
  // this allows the div reveal to be animated (transition:opacity)

  nav {
    li:hover > .hover-menu {
      opacity: 1;
      visibility: visible;
    }
  }

  .hover-menu {
    @include hw(14vw, 100%);
    @include flex(center, row, center);
    @include tl($h-header, 0);
    background-color: $orange;
    box-shadow: $level1-inset, $level1;
    opacity: 0;
    position: fixed; // position:fixed instead of :absolute in order to make a full-width menu that spread horizontally
    transition: visibility .25s ease-in-out, opacity .25s ease-in-out;
    visibility: hidden;
    z-index: 1;

    // these are the individual menu items; the a:link determines the size of the div
    // the meta image properties are defined here, as well as background
    // the actual background images are defined under .products and .services below

    > div {
      @include bgimg(0, auto 35%, 105%, center, no-repeat);
      background-color: light;
      margin: 0 1rem;

      a:link,
      a:visited,
      a:active {
        @include hw(11vw, 11vw);
        @include flex(center, column, flex-end);
        @include font(0, 1.2em, 700, lighten($grey-dark, 10%));
        border: 1px solid $light;
        padding: .5em;
      }

      h1 {
        text-align: center;
        white-space: normal;
      }
    }
  }

  // define the product backgrounds and background parameters

  .products {
    > div {
      &:nth-of-type(1) {
        @include bgimg('product-general-purpose.jpg');
        background-color: $light;
      }

      &:nth-of-type(2) {
        @include bgimg('product-xmill.jpg');
        background-color: $light;
      }

      &:nth-of-type(3) {
        @include bgimg('product-threadmill.jpg');
        background-color: $light;
      }

      &:nth-of-type(4) {
        @include bgimg('product-p20-pro.jpg');
        background-color: $light;
      }

      &:nth-of-type(5) {
        @include bgimg('product-high-velocity.jpg');
        background-color: $light;
      }
    }
  }
}
